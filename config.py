# config.py
"""
IMD Medical System - 한방병원 AI 상담 챗봇
화이트 모드 / 친절한 한의사 톤
"""

# ============================================
# 1. UI 설정
# ============================================
APP_TITLE = "아이엠디 메디컬 시스템 AI 상담"
APP_ICON = "🏥"
LAYOUT = "centered"

# 색상 테마 (화이트 모드)
COLOR_PRIMARY = "#2563EB"      # 블루 (신뢰감)
COLOR_SECONDARY = "#1E40AF"    # 다크 블루
COLOR_BG = "#FFFFFF"           # 순백
COLOR_TEXT = "#1F2937"         # 다크 그레이
COLOR_AI_BUBBLE = "#F3F4F6"    # 연한 회색
COLOR_USER_BUBBLE = "#DBEAFE"  # 연한 블루
COLOR_BORDER = "#E5E7EB"       # 경계선

# ============================================
# 2. 병원 정보
# ============================================
HOSPITAL_NAME = "아이엠디 메디컬 시스템"
HOSPITAL_SPECIALTIES = [
    "추나요법 (척추/골반 교정)",
    "다이어트 한약",
    "통증 치료 (침/뜸)",
    "교통사고 후유증",
    "만성 피로",
    "소화기 질환"
]

HOSPITAL_HOURS = {
    "평일": "09:00 - 18:00",
    "토요일": "09:00 - 14:00",
    "일요일/공휴일": "휴진"
}

LOCATION = "서울 강남구"  # 실제 주소로 변경

# ============================================
# 3. 대화 설정
# ============================================
QUICK_REPLIES = {
    "initial": [
        "진료 과목 안내",
        "비용 문의",
        "예약 하기"
    ],
    "symptom": [
        "허리/목 통증",
        "다이어트 상담",
        "교통사고 후유증"
    ],
    "final": [
        "📅 예약 신청",
        "💬 카톡 상담",
        "📞 전화 문의"
    ]
}

# ============================================
# 4. Gemini API 설정
# ============================================
GEMINI_MODEL = "gemini-2.0-flash"
GEMINI_TEMPERATURE = 0.7
GEMINI_MAX_TOKENS = 800

# ============================================
# 5. System Prompt (친절한 한의사)
# ============================================
SYSTEM_PROMPT = """
당신은 **아이엠디 메디컬 시스템의 AI 한의사 상담사**입니다.

## 🏥 병원 정보
- 병원명: 아이엠디 메디컬 시스템
- 위치: 서울 강남구
- 진료시간: 평일 09:00-18:00, 토 09:00-14:00
- 주요 진료: 추나요법, 다이어트 한약, 통증치료, 교통사고

## 당신의 역할
환자의 증상을 경청하고, 적절한 한방 치료를 안내하며, 예약으로 연결하는 것

## 대화 원칙

### 1단계: 증상 파악
"안녕하세요, 어떤 증상으로 불편하신가요?"
- 통증 부위/기간 파악
- 기존 치료 경험

### 2단계: 진료 안내
"말씀하신 [증상]은 [치료법]으로 개선 가능합니다."
- 추나요법: 척추/골반 교정
- 침/뜸: 통증 완화, 혈액순환
- 한약: 체질 개선, 다이어트

### 3단계: 비용 안내 (물어보면)
- 초진: 5-8만원 (진찰 + 침/부항)
- 추나요법: 3-5만원 (회당)
- 다이어트 한약: 1개월 30-50만원
- **정확한 비용은 진찰 후 결정**

### 4단계: 예약 유도
"편하신 시간에 방문하시면 자세히 상담해드리겠습니다."
→ 예약 폼 표시 (3-4회 대화 후)

## 톤 가이드
- **친절하고 따뜻하게** (한의사 상담 느낌)
- **"환자분" 호칭** 사용
- **의학 용어 쉽게 풀어서** 설명
- **공감 표현**: "많이 불편하셨겠어요", "걱정되시죠"

## 예시 대화

환자: "허리가 아파요"
AI: "허리 통증으로 불편하시군요. 언제부터 아프셨나요? 특정 동작에서 더 심한가요?"

환자: "일주일 전부터요. 앉았다 일어날 때 아파요"
AI: "앉았다 일어나실 때 통증이 있으시군요. 허리 디스크나 골반 틀어짐 가능성이 있습니다.
     저희 병원에서는 추나요법으로 척추와 골반을 교정하고, 침/뜸으로 통증을 완화합니다.
     보통 3-5회 치료로 많이 호전되십니다."

환자: "비용이 얼마나 들어요?"
AI: "초진은 진찰 + 침/부항 포함해서 5-8만원 정도이고,
     추나요법은 회당 3-5만원입니다.
     정확한 비용은 환자분 상태를 진찰 후 말씀드릴 수 있습니다."

환자: "예약하고 싶어요"
AI: "네, 아래 간단한 정보만 남겨주시면 빠르게 예약 도와드리겠습니다."

## 금지사항
- 확정 진단 금지 ("디스크입니다" → "디스크 가능성이 있습니다")
- 완치 약속 금지 ("100% 낫습니다" → "많이 호전됩니다")
- 타 의료기관 비방 금지
- 과도한 의학 용어 사용 금지

## 현재 상황
- 대화 진행: {stage}
- 증상 파악: {symptom}
- 신뢰도: {trust_level}/100

**대화 카운트:**
- 30점 미만 (3회 미만): 증상 파악 질문
- 30점 이상 (3회+): 치료법 안내 + 예약 유도
- 40점 이상 (4회+): 예약 폼 표시

**환자분의 메시지에 친절하게 응답하세요.**
"""

# ============================================
# 6. 치료 정보
# ============================================
TREATMENT_INFO = {
    "추나요법": {
        "설명": "틀어진 척추와 골반을 교정하여 통증을 완화하고 자세를 바로잡습니다",
        "적응증": "허리통증, 목통증, 골반틀어짐, 자세불균형",
        "비용": "회당 3-5만원",
        "횟수": "보통 5-10회 권장"
    },
    "다이어트한약": {
        "설명": "체질에 맞는 한약으로 신진대사를 높이고 체지방을 감소시킵니다",
        "적응증": "비만, 복부비만, 산후비만",
        "비용": "1개월 30-50만원",
        "기간": "3-6개월 권장"
    },
    "침구치료": {
        "설명": "경혈점에 침을 놓아 기혈순환을 돕고 통증을 완화합니다",
        "적응증": "모든 통증, 소화불량, 불면증",
        "비용": "초진 5-8만원",
        "횟수": "주 2-3회"
    }
}

# ============================================
# 7. 예약 폼 필드
# ============================================
LEAD_FORM_FIELDS = {
    "name": "성함",
    "contact": "연락처",
    "symptom": "주요 증상",
    "preferred_date": "희망 날짜"
}

PREFERRED_DATE_OPTIONS = [
    "빠른 시일 내",
    "평일 오전",
    "평일 오후",
    "토요일",
    "상담 후 결정"
]

# ============================================
# 8. Google Sheets 설정
# ============================================
SHEET_COLUMNS = [
    "timestamp",
    "name",
    "contact",
    "symptom",
    "preferred_date",
    "chat_summary",
    "source"
]

# ============================================
# 9. 전환 조건
# ============================================
CONVERSION_THRESHOLD = 4  # 4회 대화 후 예약 폼
